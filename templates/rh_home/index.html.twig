{% extends 'base_rh.html.twig' %}
{% block stylesheets %}
    {{ parent() }}
	<link rel="stylesheet" href="{{ asset('assets/dist/css/home.css')}}">
{% endblock %}

{% block body %}
	<div class="banner" style="padding: 0 2%;margin: 0 2%;">
	<div style="display:flex">
		<div style="line-height: 20px;flex: 1;background-color: #7c97a1;"><i class="fa fa-search" style="line-height: 33px;"></i></div>
		<div style="flex: 15;">
			<input type="search" name="q" class="form-control" placeholder="Tapez le nom/prÃ©nom (en entier ou partiel) ou l'adresse email du candidat" onchange="searchCandidat(this)">
		</div>
	</div>
		<br/>
		<div class="ajax-content">
			{% for candidat in candidates %}
		        <div>
		            <!-- Team member -->
		            <div class="col-xs-12 col-sm-4 col-md-2">
						<a href="{{ path('candidat_view', {id: candidat.id}) }}" class="cv_show" title="Voir le CV">
							<div class="image-flip" ontouchstart="this.classList.toggle('hover');">
								<div class="mainflip">
									<div class="frontside">
										<div class="card">
											<div class="card-body text-center">
												<p><img class="img-fluid img-cv-list" src="{{ asset('uploads/photos/' ~ candidat.profileName) }}" alt="Photo de {{ candidat.lastName }}" alt="card image"></p>
												<div>
													<h2 class="card-title">{{ candidat.lastName }}</h2>
													<p class="card-title" style="font-size: 18px;">{{ candidat.firstName }}</p>
													<p class="card-text" style="font-weight:normal">{{ candidat.email }}</p>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</a>
					</div>
				</div>
			{% endfor %}
		</div>
	</div>
{% endblock %}
{% block javascripts %}
	<script type="text/javascript">
		function searchCandidat(query) {
			$.post({
				url: '/candidat/filter/list/candidat',
				method: 'POST',
				data: {q: query.value},
				success: function(data) {
					var html = '';
					for (var i = 0; i < data.length; i++) {
				        html += '<div>';
				        html += '<div class="col-xs-12 col-sm-4 col-md-2">';
						html += '<a href="/candidat/'+ data[i].id +'" class="cv_show" title="Voir le CV">';
						html += '<div class="image-flip" ontouchstart="this.classList.toggle("hover");">';
						html += '<div class="mainflip">';
						html += '<div class="frontside">';
						html += '<div class="card">';
						html += '<div class="card-body text-center">';
						html += '<p><img class="img-fluid img-cv-list" src="/uploads/photos/' + data[i].profileName +'" alt="Photo de ' + data[i].lastName +'" alt="card image"></p>';
						html += '<div>';
						html += '<h2 class="card-title">' + data[i].lastName +'</h2>';
						html += '<p class="card-title" style="font-size: 18px;">' + data[i].firstName +'</p>';
						html += '<p class="card-text" style="font-weight:normal">' + data[i].username +'</p>';
						html += '</div>';
						html += '</div>';
						html += '</div>';
						html += '</div>';
						html += '</div>';
						html += '</div>';
						html += '</a>';
						html += '</div>';
						html += '</div>'
					}
					$('.ajax-content').html(html);
				}
			});
		}
	</script>
{% endblock %}